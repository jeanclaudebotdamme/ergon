(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2729:function(e,t,s){Promise.resolve().then(s.bind(s,8028))},8028:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var r=s(7437),a=s(2265),n=s(114),i=s(4887);function o(e){let{isOpen:t,onClose:s,children:n,title:o}=e,[l,c]=(0,a.useState)(!1);return((0,a.useEffect)(()=>(c(!0),()=>c(!1)),[]),t&&l)?(0,i.createPortal)((0,r.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:s}),(0,r.jsxs)("div",{className:"relative bg-surface-secondary rounded-xl border border-border shadow-2xl w-full max-w-md mx-4 overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-5 py-4 border-b border-border",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-text",children:o}),(0,r.jsx)("button",{onClick:s,className:"text-text-muted hover:text-text transition-colors",children:(0,r.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,r.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,r.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,r.jsx)("div",{className:"p-5",children:n})]})]}),document.body):null}function l(e){let{task:t,defaultColumnId:s,onSuccess:i,onCancel:o}=e,{columns:l,tasks:c,createTask:d,updateTask:x,deleteTask:u}=(0,n.a)(),[m,h]=(0,a.useState)((null==t?void 0:t.title)||""),[p,g]=(0,a.useState)((null==t?void 0:t.notes)||""),[b,f]=(0,a.useState)((null==t?void 0:t.column_id)||s||""),[j,v]=(0,a.useState)((null==t?void 0:t.assignee)||""),[y,w]=(0,a.useState)((null==t?void 0:t.priority)||!1),[k,N]=(0,a.useState)(!1),[C,S]=(0,a.useState)(!1),E=async e=>{if(e.preventDefault(),m.trim()&&b){N(!0);try{if(t)await x(t.id,{title:m.trim(),notes:p.trim()||null,column_id:b,assignee:j||null,priority:y});else{let e=c.filter(e=>e.column_id===b),t=e.length>0?Math.max(...e.map(e=>e.position))+1:0;await d({title:m.trim(),notes:p.trim()||null,column_id:b,assignee:j||null,priority:y,position:t})}i()}catch(e){console.error("Error saving task:",e),alert("Failed to save task. Please try again.")}finally{N(!1)}}},_=async()=>{if(t&&confirm("Are you sure you want to delete this task?")){S(!0);try{await u(t.id),i()}catch(e){console.error("Error deleting task:",e),alert("Failed to delete task. Please try again.")}finally{S(!1)}}};return(0,r.jsxs)("form",{onSubmit:E,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-text-muted mb-1.5 uppercase tracking-wide",children:"Title"}),(0,r.jsx)("input",{type:"text",value:m,onChange:e=>h(e.target.value),placeholder:"Enter task title...",className:"w-full px-3 py-2.5 bg-background border border-border rounded-lg text-text placeholder-text-disabled focus:outline-none focus:border-accent transition-colors",autoFocus:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-text-muted mb-1.5 uppercase tracking-wide",children:"Column"}),(0,r.jsxs)("select",{value:b,onChange:e=>f(e.target.value),className:"w-full px-3 py-2.5 bg-background border border-border rounded-lg text-text focus:outline-none focus:border-accent transition-colors appearance-none cursor-pointer",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%23666' stroke-width='2'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E\")",backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center"},children:[(0,r.jsx)("option",{value:"",children:"Select a column"}),l.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-text-muted mb-1.5 uppercase tracking-wide",children:"Assignee"}),(0,r.jsxs)("select",{value:j,onChange:e=>v(e.target.value),className:"w-full px-3 py-2.5 bg-background border border-border rounded-lg text-text focus:outline-none focus:border-accent transition-colors appearance-none cursor-pointer",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%23666' stroke-width='2'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E\")",backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center"},children:[(0,r.jsx)("option",{value:"",children:"Unassigned"}),(0,r.jsx)("option",{value:"jason",children:"Jason"}),(0,r.jsx)("option",{value:"jc",children:"JC"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-text-muted mb-1.5 uppercase tracking-wide",children:"Notes"}),(0,r.jsx)("textarea",{value:p,onChange:e=>g(e.target.value),placeholder:"Add notes...",rows:3,className:"w-full px-3 py-2.5 bg-background border border-border rounded-lg text-text placeholder-text-disabled focus:outline-none focus:border-accent transition-colors resize-none"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"priority",checked:y,onChange:e=>w(e.target.checked),className:"w-4 h-4 rounded border-border bg-background text-accent focus:ring-accent cursor-pointer"}),(0,r.jsx)("label",{htmlFor:"priority",className:"text-sm text-text cursor-pointer",children:"Mark as priority"})]}),(0,r.jsxs)("div",{className:"flex gap-3 pt-2",children:[t&&(0,r.jsx)("button",{type:"button",onClick:_,disabled:C,className:"px-4 py-2 bg-transparent text-red-400 border border-red-400/30 rounded-lg text-sm font-medium hover:bg-red-400/10 transition-all duration-150 disabled:opacity-50",children:C?"Deleting...":"Delete"}),(0,r.jsx)("div",{className:"flex-1"}),(0,r.jsx)("button",{type:"button",onClick:o,className:"px-4 py-2 bg-transparent text-text-muted border border-border rounded-lg text-sm font-medium hover:bg-surface-hover hover:text-text transition-all duration-150",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:k||!m.trim()||!b,className:"px-4 py-2 bg-accent text-text rounded-lg text-sm font-medium hover:bg-accent-hover transition-all duration-150 disabled:opacity-50 disabled:cursor-not-allowed",children:k?"Saving...":t?"Save Changes":"Create Task"})]})]})}function c(e){let{title:t="Ergon"}=e,{tasks:s,columns:i}=(0,n.a)(),[c,d]=(0,a.useState)(!1),x=i.find(e=>"progress"===e.status_key),u=i.find(e=>"jason"===e.status_key),m=i.find(e=>"jc"===e.status_key),h=x?s.filter(e=>e.column_id===x.id).length:0,p=(u?s.filter(e=>e.column_id===u.id).length:0)+(m?s.filter(e=>e.column_id===m.id).length:0);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("header",{className:"flex justify-between items-center px-8 py-5 border-b border-border bg-background h-header",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-accent to-[#1e3d29] rounded-lg flex items-center justify-center font-semibold text-sm text-accent-light",children:"E"}),(0,r.jsx)("span",{className:"text-xl font-semibold text-text tracking-tight",children:t})]}),(0,r.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsxs)("div",{className:"bg-surface-hover px-3 py-1.5 rounded-md text-xs text-text-subtle",children:[(0,r.jsx)("span",{className:"text-text font-medium mr-1",children:h}),"in progress"]}),(0,r.jsxs)("div",{className:"bg-surface-hover px-3 py-1.5 rounded-md text-xs text-text-subtle",children:[(0,r.jsx)("span",{className:"text-text font-medium mr-1",children:p}),"need action"]})]}),(0,r.jsx)("button",{className:"px-4 py-2 bg-transparent text-text-muted border border-[#333] rounded-lg text-sm font-medium hover:bg-surface-hover hover:text-text transition-all duration-150",children:"Filter"}),(0,r.jsx)("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-accent text-text rounded-lg text-sm font-medium hover:bg-accent-hover transition-all duration-150",children:"+ New Task"})]})]}),(0,r.jsx)(o,{isOpen:c,onClose:()=>d(!1),title:"New Task",children:(0,r.jsx)(l,{onSuccess:()=>d(!1),onCancel:()=>d(!1)})})]})}function d(e){let{activeView:t="board"}=e,s=[{id:"board",name:"Board",icon:(0,r.jsxs)("svg",{className:"w-[18px] h-[18px]",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,r.jsx)("rect",{x:"3",y:"3",width:"7",height:"7",rx:"1"}),(0,r.jsx)("rect",{x:"14",y:"3",width:"7",height:"7",rx:"1"}),(0,r.jsx)("rect",{x:"3",y:"14",width:"7",height:"7",rx:"1"}),(0,r.jsx)("rect",{x:"14",y:"14",width:"7",height:"7",rx:"1"})]})},{id:"list",name:"List",icon:(0,r.jsxs)("svg",{className:"w-[18px] h-[18px]",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,r.jsx)("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),(0,r.jsx)("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),(0,r.jsx)("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),(0,r.jsx)("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),(0,r.jsx)("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),(0,r.jsx)("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]})},{id:"notes",name:"Notes",badge:4,icon:(0,r.jsxs)("svg",{className:"w-[18px] h-[18px]",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,r.jsx)("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),(0,r.jsx)("polyline",{points:"14 2 14 8 20 8"}),(0,r.jsx)("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),(0,r.jsx)("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]})}],a=()=>(0,r.jsx)("svg",{className:"w-[18px] h-[18px] opacity-70",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,r.jsx)("circle",{cx:"12",cy:"12",r:"10"})}),n=()=>(0,r.jsxs)("svg",{className:"w-[18px] h-[18px] opacity-70",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,r.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),(0,r.jsx)("circle",{cx:"12",cy:"7",r:"4"})]}),i=()=>(0,r.jsxs)("svg",{className:"w-[18px] h-[18px] opacity-70",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,r.jsx)("rect",{x:"3",y:"11",width:"18",height:"10",rx:"2"}),(0,r.jsx)("circle",{cx:"12",cy:"5",r:"2"})]});return(0,r.jsxs)("aside",{className:"w-sidebar bg-[#1f1f1f] border-r border-border flex-shrink-0 py-5 px-4 overflow-y-auto",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("div",{className:"text-xs uppercase tracking-wider text-text-disabled mb-2 px-2",children:"Views"}),s.map(e=>(0,r.jsxs)("div",{className:"flex items-center gap-2.5 px-3 py-2.5 rounded-lg cursor-pointer transition-all duration-150 text-sm ".concat(t===e.id?"bg-surface-hover text-text":"text-text-muted hover:bg-surface-hover hover:text-text"),children:[e.icon,(0,r.jsx)("span",{children:e.name}),e.badge&&(0,r.jsx)("span",{className:"ml-auto bg-accent text-accent-light text-[11px] px-1.5 py-0.5 rounded font-medium",children:e.badge})]},e.id))]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("div",{className:"text-xs uppercase tracking-wider text-text-disabled mb-2 px-2",children:"Projects"}),[{id:"stoa",name:"Stoa Dashboard"},{id:"growth",name:"Growth Machina"}].map(e=>(0,r.jsxs)("div",{className:"flex items-center gap-2.5 px-3 py-2.5 rounded-lg cursor-pointer transition-all duration-150 text-sm text-text-muted hover:bg-surface-hover hover:text-text",children:[(0,r.jsx)(a,{}),(0,r.jsx)("span",{children:e.name})]},e.id))]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("div",{className:"text-xs uppercase tracking-wider text-text-disabled mb-2 px-2",children:"Team"}),[{id:"jason",name:"Jason",icon:"user"},{id:"jc",name:"JC",icon:"bot"}].map(e=>(0,r.jsxs)("div",{className:"flex items-center gap-2.5 px-3 py-2.5 rounded-lg cursor-pointer transition-all duration-150 text-sm text-text-muted hover:bg-surface-hover hover:text-text",children:["user"===e.icon?(0,r.jsx)(n,{}):(0,r.jsx)(i,{}),(0,r.jsx)("span",{children:e.name})]},e.id))]})]})}function x(e){let{task:t}=e,[s,n]=(0,a.useState)(!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{onClick:()=>n(!0),className:"bg-surface-secondary rounded-xl p-3.5 px-4 cursor-pointer transition-all duration-150 border border-transparent hover:bg-surface-elevated hover:border-border-hover",children:[(0,r.jsx)("div",{className:"text-sm font-medium mb-2 text-text",children:t.title}),(0,r.jsxs)("div",{className:"flex gap-2 items-center flex-wrap",children:[t.assignee&&(0,r.jsx)("span",{className:"text-[11px] px-2 py-0.5 rounded font-medium ".concat((e=>{switch(e){case"jason":return"bg-tag-jason-bg text-tag-jason-text";case"jc":return"bg-tag-jc-bg text-tag-jc-text";default:return"bg-surface-secondary text-text-muted"}})(t.assignee)),children:"jason"===t.assignee?"Jason":"JC"}),t.priority&&(0,r.jsx)("span",{className:"text-[11px] px-2 py-0.5 rounded font-medium bg-tag-priority-bg text-tag-priority-text",children:"Priority"}),(0,r.jsx)("span",{className:"text-[11px] text-text-disabled ml-auto",children:new Date(t.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]})]}),(0,r.jsx)(o,{isOpen:s,onClose:()=>n(!1),title:"Edit Task",children:(0,r.jsx)(l,{task:t,onSuccess:()=>n(!1),onCancel:()=>n(!1)})})]})}function u(e){let{column:t,tasks:s}=e,[n,i]=(0,a.useState)(!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"w-column flex-shrink-0 bg-surface rounded-xl p-4 flex flex-col",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsxs)("span",{className:"text-[13px] font-semibold uppercase tracking-wide flex items-center ".concat((e=>{switch(e){case"backlog":return"text-status-backlog";case"progress":return"text-status-progress";case"jason":return"text-status-jason";case"jc":return"text-status-jc";case"done":return"text-status-done";default:return"text-text-subtle"}})(t.status_key)),children:[(0,r.jsx)("span",{className:"w-2 h-2 rounded-full mr-2 ".concat((e=>{switch(e){case"backlog":return"bg-[#555]";case"progress":return"bg-status-progress";case"jason":return"bg-status-jason";case"jc":return"bg-status-jc";case"done":return"bg-[#3d6b4a]";default:return"bg-text-disabled"}})(t.status_key))}),t.name]}),(0,r.jsx)("span",{className:"text-xs text-text-disabled bg-surface-secondary px-2 py-0.5 rounded",children:s.length})]}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto flex flex-col gap-2.5",children:s.map(e=>(0,r.jsx)(x,{task:e},e.id))}),(0,r.jsx)("div",{onClick:()=>i(!0),className:"mt-3 p-2.5 border border-dashed border-border-hover rounded-lg text-[13px] text-[#555] cursor-pointer text-center transition-all duration-150 hover:border-[#4a4a4a] hover:text-[#777] hover:bg-white/[0.02]",children:"+ Add task"})]}),(0,r.jsx)(o,{isOpen:n,onClose:()=>i(!1),title:"New Task",children:(0,r.jsx)(l,{defaultColumnId:t.id,onSuccess:()=>i(!1),onCancel:()=>i(!1)})})]})}function m(){let{columns:e,tasks:t,loading:s,refreshData:i}=(0,n.a)();(0,a.useEffect)(()=>{i()},[i]);let o=e=>t.filter(t=>t.column_id===e).sort((e,t)=>e.position-t.position);return s?(0,r.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-text-muted",children:"Loading..."})}):(0,r.jsxs)("div",{className:"min-h-screen bg-background flex flex-col",children:[(0,r.jsx)(c,{title:"Ergon Dashboard"}),(0,r.jsxs)("main",{className:"flex flex-1 overflow-hidden",style:{height:"calc(100vh - 73px)"},children:[(0,r.jsx)(d,{activeView:"board"}),(0,r.jsxs)("section",{className:"flex-1 p-6 overflow-x-auto",children:[(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)("h1",{className:"text-2xl font-semibold tracking-tight text-text",children:"Ergon Dashboard"})}),(0,r.jsx)("div",{className:"flex gap-4 h-[calc(100%-60px)]",children:e.map(e=>(0,r.jsx)(u,{column:e,tasks:o(e.id)},e.id))})]})]})]})}},114:function(e,t,s){"use strict";s.d(t,{L:function(){return u},a:function(){return m}});var r=s(7437),a=s(2265);let n=(0,s(3053).eI)("https://zervleduznpzyjdkycit.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InplcnZsZWR1em5wenlqZGt5Y2l0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAwMDQ4MjMsImV4cCI6MjA4NTU4MDgyM30.np1YCouQ7NYuKXNR_7cwAO9RCd6Irh-IPJ9jteSGvcg");async function i(){let{data:e,error:t}=await n.from("columns").select("*").order("position");if(t)throw t;return e||[]}async function o(){let{data:e,error:t}=await n.from("tasks").select("*").order("position");if(t)throw t;return e||[]}async function l(e){let{data:t,error:s}=await n.from("tasks").insert(e).select().single();if(s)throw s;return t}async function c(e,t){let{data:s,error:r}=await n.from("tasks").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(r)throw r;return s}async function d(e){let{error:t}=await n.from("tasks").delete().eq("id",e);if(t)throw t}let x=(0,a.createContext)(void 0);function u(e){let{children:t}=e,[s,n]=(0,a.useState)([]),[u,m]=(0,a.useState)([]),[h,p]=(0,a.useState)(!0),[g,b]=(0,a.useState)(null),f=(0,a.useCallback)(async()=>{try{p(!0),b(null);let[e,t]=await Promise.all([i(),o()]);n(e),m(t)}catch(e){b(e instanceof Error?e.message:"Failed to load data"),console.error("Error loading data:",e)}finally{p(!1)}},[]),j=(0,a.useCallback)(async e=>{try{let t=await l(e);return m(e=>[...e,t]),t}catch(e){throw console.error("Error creating task:",e),e}},[]),v=(0,a.useCallback)(async(e,t)=>{try{let s=await c(e,t);return m(t=>t.map(t=>t.id===e?s:t)),s}catch(e){throw console.error("Error updating task:",e),e}},[]),y=(0,a.useCallback)(async e=>{try{await d(e),m(t=>t.filter(t=>t.id!==e))}catch(e){throw console.error("Error deleting task:",e),e}},[]),w=(0,a.useCallback)(async(e,t)=>{try{let s=await c(e,{column_id:t});m(t=>t.map(t=>t.id===e?s:t))}catch(e){throw console.error("Error moving task:",e),e}},[]);return(0,r.jsx)(x.Provider,{value:{columns:s,tasks:u,loading:h,error:g,refreshData:f,createTask:j,updateTask:v,deleteTask:y,moveTask:w},children:t})}function m(){let e=(0,a.useContext)(x);if(void 0===e)throw Error("useKanban must be used within a KanbanProvider");return e}}},function(e){e.O(0,[53,971,117,744],function(){return e(e.s=2729)}),_N_E=e.O()}]);