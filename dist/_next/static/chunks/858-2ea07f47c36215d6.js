"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[858],{4196:function(e,t,r){r.d(t,{Z:function(){return d}});var s=r(7437),n=r(2265),a=r(7648),o=r(9376),i=r(848),l=r(3404),c=r(3895);function d(e){let{title:t="Ergon"}=e,{tasks:r,columns:d}=(0,i.a)(),[x,u]=(0,n.useState)(!1),m="/usage"===(0,o.usePathname)(),h=d.find(e=>"progress"===e.status_key),p=d.find(e=>"jason"===e.status_key),g=d.find(e=>"jc"===e.status_key),b=h?r.filter(e=>e.column_id===h.id).length:0,f=(p?r.filter(e=>e.column_id===p.id).length:0)+(g?r.filter(e=>e.column_id===g.id).length:0);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("header",{className:"flex justify-between items-center px-8 py-5 border-b border-border bg-background h-header",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-accent to-[#1e3d29] rounded-lg flex items-center justify-center font-semibold text-sm text-accent-light",children:"E"}),(0,s.jsx)("span",{className:"text-xl font-semibold text-text tracking-tight",children:t})]}),(0,s.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsxs)("div",{className:"bg-surface-hover px-3 py-1.5 rounded-md text-xs text-text-subtle",children:[(0,s.jsx)("span",{className:"text-text font-medium mr-1",children:b}),"in progress"]}),(0,s.jsxs)("div",{className:"bg-surface-hover px-3 py-1.5 rounded-md text-xs text-text-subtle",children:[(0,s.jsx)("span",{className:"text-text font-medium mr-1",children:f}),"need action"]})]}),!m&&(0,s.jsx)("button",{className:"px-4 py-2 bg-transparent text-text-muted border border-[#333] rounded-lg text-sm font-medium hover:bg-surface-hover hover:text-text transition-all duration-150",children:"Filter"}),(0,s.jsx)(a.default,{href:"/usage",className:"px-4 py-2 rounded-lg text-sm font-medium transition-all duration-150 ".concat(m?"bg-accent text-text":"bg-transparent text-text-muted border border-[#333] hover:bg-surface-hover hover:text-text"),children:"Usage"}),m&&(0,s.jsx)(a.default,{href:"/",className:"px-4 py-2 bg-transparent text-text-muted border border-[#333] rounded-lg text-sm font-medium hover:bg-surface-hover hover:text-text transition-all duration-150",children:"Board"}),!m&&(0,s.jsx)("button",{onClick:()=>u(!0),className:"px-4 py-2 bg-accent text-text rounded-lg text-sm font-medium hover:bg-accent-hover transition-all duration-150",children:"+ New Task"})]})]}),(0,s.jsx)(l.Z,{isOpen:x,onClose:()=>u(!1),title:"New Task",children:(0,s.jsx)(c.Z,{onSuccess:()=>u(!1),onCancel:()=>u(!1)})})]})}},848:function(e,t,r){r.d(t,{L:function(){return i},a:function(){return l}});var s=r(7437),n=r(2265),a=r(2141);let o=(0,n.createContext)(void 0);function i(e){let{children:t}=e,[r,i]=(0,n.useState)([]),[l,c]=(0,n.useState)([]),[d,x]=(0,n.useState)(!0),[u,m]=(0,n.useState)(null),h=(0,n.useCallback)(async()=>{try{x(!0),m(null);let[e,t]=await Promise.all([(0,a.HA)(),(0,a.Jv)()]);i(e),c(t)}catch(e){m(e instanceof Error?e.message:"Failed to load data"),console.error("Error loading data:",e)}finally{x(!1)}},[]),p=(0,n.useCallback)(async e=>{try{let t=await (0,a.vr)(e);return c(e=>[...e,t]),t}catch(e){throw console.error("Error creating task:",e),e}},[]),g=(0,n.useCallback)(async(e,t)=>{try{let r=await (0,a.xJ)(e,t);return c(t=>t.map(t=>t.id===e?r:t)),r}catch(e){throw console.error("Error updating task:",e),e}},[]),b=(0,n.useCallback)(async e=>{try{await (0,a._5)(e),c(t=>t.filter(t=>t.id!==e))}catch(e){throw console.error("Error deleting task:",e),e}},[]),f=(0,n.useCallback)(async(e,t)=>{try{let r=await (0,a.xJ)(e,{column_id:t});c(t=>t.map(t=>t.id===e?r:t))}catch(e){throw console.error("Error moving task:",e),e}},[]);return(0,s.jsx)(o.Provider,{value:{columns:r,tasks:l,loading:d,error:u,refreshData:h,createTask:p,updateTask:g,deleteTask:b,moveTask:f},children:t})}function l(){let e=(0,n.useContext)(o);if(void 0===e)throw Error("useKanban must be used within a KanbanProvider");return e}},3404:function(e,t,r){r.d(t,{Z:function(){return o}});var s=r(7437),n=r(2265),a=r(4887);function o(e){let{isOpen:t,onClose:r,children:o,title:i}=e,[l,c]=(0,n.useState)(!1);return((0,n.useEffect)(()=>(c(!0),()=>c(!1)),[]),t&&l)?(0,a.createPortal)((0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:r}),(0,s.jsxs)("div",{className:"relative bg-surface-secondary rounded-xl border border-border shadow-2xl w-full max-w-md mx-4 overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-5 py-4 border-b border-border",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-text",children:i}),(0,s.jsx)("button",{onClick:r,className:"text-text-muted hover:text-text transition-colors",children:(0,s.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,s.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,s.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,s.jsx)("div",{className:"p-5",children:o})]})]}),document.body):null}},3119:function(e,t,r){r.d(t,{Z:function(){return n}});var s=r(7437);function n(e){let{activeView:t="board"}=e,r=[{id:"board",name:"Board",icon:(0,s.jsxs)("svg",{className:"w-[18px] h-[18px]",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,s.jsx)("rect",{x:"3",y:"3",width:"7",height:"7",rx:"1"}),(0,s.jsx)("rect",{x:"14",y:"3",width:"7",height:"7",rx:"1"}),(0,s.jsx)("rect",{x:"3",y:"14",width:"7",height:"7",rx:"1"}),(0,s.jsx)("rect",{x:"14",y:"14",width:"7",height:"7",rx:"1"})]})},{id:"list",name:"List",icon:(0,s.jsxs)("svg",{className:"w-[18px] h-[18px]",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,s.jsx)("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),(0,s.jsx)("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),(0,s.jsx)("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),(0,s.jsx)("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),(0,s.jsx)("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),(0,s.jsx)("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]})},{id:"notes",name:"Notes",badge:4,icon:(0,s.jsxs)("svg",{className:"w-[18px] h-[18px]",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,s.jsx)("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),(0,s.jsx)("polyline",{points:"14 2 14 8 20 8"}),(0,s.jsx)("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),(0,s.jsx)("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]})}],n=()=>(0,s.jsx)("svg",{className:"w-[18px] h-[18px] opacity-70",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,s.jsx)("circle",{cx:"12",cy:"12",r:"10"})}),a=()=>(0,s.jsxs)("svg",{className:"w-[18px] h-[18px] opacity-70",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,s.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),(0,s.jsx)("circle",{cx:"12",cy:"7",r:"4"})]}),o=()=>(0,s.jsxs)("svg",{className:"w-[18px] h-[18px] opacity-70",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,s.jsx)("rect",{x:"3",y:"11",width:"18",height:"10",rx:"2"}),(0,s.jsx)("circle",{cx:"12",cy:"5",r:"2"})]});return(0,s.jsxs)("aside",{className:"w-sidebar bg-[#1f1f1f] border-r border-border flex-shrink-0 py-5 px-4 overflow-y-auto",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("div",{className:"text-xs uppercase tracking-wider text-text-disabled mb-2 px-2",children:"Views"}),r.map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-2.5 px-3 py-2.5 rounded-lg cursor-pointer transition-all duration-150 text-sm ".concat(t===e.id?"bg-surface-hover text-text":"text-text-muted hover:bg-surface-hover hover:text-text"),children:[e.icon,(0,s.jsx)("span",{children:e.name}),e.badge&&(0,s.jsx)("span",{className:"ml-auto bg-accent text-accent-light text-[11px] px-1.5 py-0.5 rounded font-medium",children:e.badge})]},e.id))]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("div",{className:"text-xs uppercase tracking-wider text-text-disabled mb-2 px-2",children:"Projects"}),[{id:"stoa",name:"Stoa Dashboard"},{id:"growth",name:"Growth Machina"}].map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-2.5 px-3 py-2.5 rounded-lg cursor-pointer transition-all duration-150 text-sm text-text-muted hover:bg-surface-hover hover:text-text",children:[(0,s.jsx)(n,{}),(0,s.jsx)("span",{children:e.name})]},e.id))]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("div",{className:"text-xs uppercase tracking-wider text-text-disabled mb-2 px-2",children:"Team"}),[{id:"jason",name:"Jason",icon:"user"},{id:"jc",name:"JC",icon:"bot"}].map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-2.5 px-3 py-2.5 rounded-lg cursor-pointer transition-all duration-150 text-sm text-text-muted hover:bg-surface-hover hover:text-text",children:["user"===e.icon?(0,s.jsx)(a,{}):(0,s.jsx)(o,{}),(0,s.jsx)("span",{children:e.name})]},e.id))]})]})}},3895:function(e,t,r){r.d(t,{Z:function(){return o}});var s=r(7437),n=r(2265),a=r(848);function o(e){let{task:t,defaultColumnId:r,onSuccess:o,onCancel:i}=e,{columns:l,tasks:c,createTask:d,updateTask:x,deleteTask:u}=(0,a.a)(),[m,h]=(0,n.useState)((null==t?void 0:t.title)||""),[p,g]=(0,n.useState)((null==t?void 0:t.notes)||""),[b,f]=(0,n.useState)((null==t?void 0:t.column_id)||r||""),[v,j]=(0,n.useState)((null==t?void 0:t.assignee)||""),[y,w]=(0,n.useState)((null==t?void 0:t.priority)||!1),[k,N]=(0,n.useState)(!1),[C,E]=(0,n.useState)(!1),S=async e=>{if(e.preventDefault(),m.trim()&&b){N(!0);try{if(t)await x(t.id,{title:m.trim(),notes:p.trim()||null,column_id:b,assignee:v||null,priority:y});else{let e=c.filter(e=>e.column_id===b),t=e.length>0?Math.max(...e.map(e=>e.position))+1:0;await d({title:m.trim(),notes:p.trim()||null,column_id:b,assignee:v||null,priority:y,position:t})}o()}catch(e){console.error("Error saving task:",e),alert("Failed to save task. Please try again.")}finally{N(!1)}}},_=async()=>{if(t&&confirm("Are you sure you want to delete this task?")){E(!0);try{await u(t.id),o()}catch(e){console.error("Error deleting task:",e),alert("Failed to delete task. Please try again.")}finally{E(!1)}}};return(0,s.jsxs)("form",{onSubmit:S,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-text-muted mb-1.5 uppercase tracking-wide",children:"Title"}),(0,s.jsx)("input",{type:"text",value:m,onChange:e=>h(e.target.value),placeholder:"Enter task title...",className:"w-full px-3 py-2.5 bg-background border border-border rounded-lg text-text placeholder-text-disabled focus:outline-none focus:border-accent transition-colors",autoFocus:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-text-muted mb-1.5 uppercase tracking-wide",children:"Column"}),(0,s.jsxs)("select",{value:b,onChange:e=>f(e.target.value),className:"w-full px-3 py-2.5 bg-background border border-border rounded-lg text-text focus:outline-none focus:border-accent transition-colors appearance-none cursor-pointer",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%23666' stroke-width='2'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E\")",backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center"},children:[(0,s.jsx)("option",{value:"",children:"Select a column"}),l.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-text-muted mb-1.5 uppercase tracking-wide",children:"Assignee"}),(0,s.jsxs)("select",{value:v,onChange:e=>j(e.target.value),className:"w-full px-3 py-2.5 bg-background border border-border rounded-lg text-text focus:outline-none focus:border-accent transition-colors appearance-none cursor-pointer",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%23666' stroke-width='2'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E\")",backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center"},children:[(0,s.jsx)("option",{value:"",children:"Unassigned"}),(0,s.jsx)("option",{value:"jason",children:"Jason"}),(0,s.jsx)("option",{value:"jc",children:"JC"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-text-muted mb-1.5 uppercase tracking-wide",children:"Notes"}),(0,s.jsx)("textarea",{value:p,onChange:e=>g(e.target.value),placeholder:"Add notes...",rows:3,className:"w-full px-3 py-2.5 bg-background border border-border rounded-lg text-text placeholder-text-disabled focus:outline-none focus:border-accent transition-colors resize-none"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",id:"priority",checked:y,onChange:e=>w(e.target.checked),className:"w-4 h-4 rounded border-border bg-background text-accent focus:ring-accent cursor-pointer"}),(0,s.jsx)("label",{htmlFor:"priority",className:"text-sm text-text cursor-pointer",children:"Mark as priority"})]}),(0,s.jsxs)("div",{className:"flex gap-3 pt-2",children:[t&&(0,s.jsx)("button",{type:"button",onClick:_,disabled:C,className:"px-4 py-2 bg-transparent text-red-400 border border-red-400/30 rounded-lg text-sm font-medium hover:bg-red-400/10 transition-all duration-150 disabled:opacity-50",children:C?"Deleting...":"Delete"}),(0,s.jsx)("div",{className:"flex-1"}),(0,s.jsx)("button",{type:"button",onClick:i,className:"px-4 py-2 bg-transparent text-text-muted border border-border rounded-lg text-sm font-medium hover:bg-surface-hover hover:text-text transition-all duration-150",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:k||!m.trim()||!b,className:"px-4 py-2 bg-accent text-text rounded-lg text-sm font-medium hover:bg-accent-hover transition-all duration-150 disabled:opacity-50 disabled:cursor-not-allowed",children:k?"Saving...":t?"Save Changes":"Create Task"})]})]})}},2141:function(e,t,r){r.d(t,{HA:function(){return n},Jv:function(){return a},_5:function(){return l},_9:function(){return c},vr:function(){return o},xJ:function(){return i}});let s=(0,r(3053).eI)("https://zervleduznpzyjdkycit.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InplcnZsZWR1em5wenlqZGt5Y2l0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAwMDQ4MjMsImV4cCI6MjA4NTU4MDgyM30.np1YCouQ7NYuKXNR_7cwAO9RCd6Irh-IPJ9jteSGvcg");async function n(){let{data:e,error:t}=await s.from("columns").select("*").order("position");if(t)throw t;return e||[]}async function a(){let{data:e,error:t}=await s.from("tasks").select("*").order("position");if(t)throw t;return e||[]}async function o(e){let{data:t,error:r}=await s.from("tasks").insert(e).select().single();if(r)throw r;return t}async function i(e,t){let{data:r,error:n}=await s.from("tasks").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(n)throw n;return r}async function l(e){let{error:t}=await s.from("tasks").delete().eq("id",e);if(t)throw t}async function c(e,t){let{data:r,error:n}=await s.from("token_usage").select("*").gte("recorded_at",e).lte("recorded_at",t).order("recorded_at",{ascending:!1});if(n)throw n;return r||[]}}}]);